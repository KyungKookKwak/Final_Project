<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="basket">
	<select id="selectOneProduct" resultType="product">
		select * from product where seq_product_no = #{num}
	</select>
	<select id="selectJoinMember" resultType="m">
		select * from member where seq_member_no = #{sellerNo}
	</select>
	
	<!--장바구니 리스트 -->
	<select id="basketList" resultMap="basketListMap">
		select * from basket order by seq_basket_no
	</select>
	<resultMap type="map" id="basketListMap"></resultMap>
	
	<!-- pageing을 위한  수 세기	 -->
	<select id="countbasketList" resultType="_int">
		select count(*) from basket
	</select>
	
	<insert id="insertAsk" parameterType="productAsk">
		insert into product_ask values ( seq_ask_no.nextval, #{askContent}, 'N', sysdate , #{askUser})
		<selectKey order="AFTER" resultType="_int" keyProperty="seqAskNo">
			select seq_ask_no.currval from dual
		</selectKey>
	</insert>
	<update id="updateProduct" parameterType="map">
		update product set seq_ask_no = #{askNo} where seq_product_no = #{productNo}
	</update>
</mapper>
